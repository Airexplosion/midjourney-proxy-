"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[971],{23391:function(G,C,s){s.r(C),s.d(C,{default:function(){return U}});var R=s(5574),u=s.n(R),g=s(67294),D=s(74981),K=s(90252),Q=s(22777),e=s(85893),J=function(c){var f=c.value,n=f===void 0?{}:f,t=c.onChange,M=g.useState(JSON.stringify(n,null,2)),d=u()(M,2),m=d[0],l=d[1],h=g.useState(!0),x=u()(h,2),I=x[0],r=x[1];(0,g.useEffect)(function(){var O=JSON.stringify(n),p=JSON.stringify(JSON.parse(m));O!==p&&l(JSON.stringify(n,null,2))},[n]);var j=function(p){l(p);try{var V=JSON.parse(p);r(!0),t&&t(V)}catch(X){r(!1)}};return(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)(D.ZP,{mode:"json",theme:"textmate",value:m,onChange:j,name:"json-editor",editorProps:{$blockScrolling:!0},height:"auto",maxLines:1/0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1},style:{width:"100%",minHeight:"80px"},fontSize:14,lineHeight:19,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0}),!I&&(0,e.jsx)("div",{style:{color:"red",marginTop:"8px"},children:"JSON \u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\uFF01"})]})},o=J,F=s(66927),N=s(60219),P=s(90930),B=s(80854),a=s(53025),v=s(2453),A=s(74330),E=s(42075),$=s(40056),T=s(14726),z=s(71230),b=s(15746),L=s(4393),Z=s(72269),i=s(74656),y=s(55102),S=s(37804),H=function(){var c=a.Z.useForm(),f=u()(c,1),n=f[0],t=(0,B.useIntl)(),M=(0,g.useState)(!1),d=u()(M,2),m=d[0],l=d[1],h=function(){l(!0),(0,F.iE)().then(function(r){l(!1),r.success&&n.setFieldsValue(r.data)})};(0,g.useEffect)(function(){h()},[]);var x=function(){n.validateFields().then(function(r){l(!0),(0,F.rF)(r).then(function(j){l(!1),j.success?(v.ZP.success(t.formatMessage({id:"pages.setting.saveSuccess"})),h()):v.ZP.error(j.message||t.formatMessage({id:"pages.setting.error"}))})}).catch(function(){v.ZP.error(t.formatMessage({id:"pages.setting.error"}))})};return(0,e.jsx)(P._z,{children:(0,e.jsx)(a.Z,{form:n,labelAlign:"left",layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},children:(0,e.jsxs)(A.Z,{spinning:m,children:[(0,e.jsxs)(E.Z,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)($.Z,{type:"info",style:{paddingTop:"4px",paddingBottom:"4px"},description:t.formatMessage({id:"pages.setting.tips"})}),(0,e.jsx)(T.ZP,{loading:m,icon:(0,e.jsx)(N.Z,{}),type:"primary",onClick:x,children:t.formatMessage({id:"pages.setting.save"})})]}),(0,e.jsxs)(z.Z,{gutter:16,children:[(0,e.jsx)(b.Z,{span:12,children:(0,e.jsxs)(L.Z,{title:t.formatMessage({id:"pages.setting.accountSetting"}),bordered:!1,children:[(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.enableSwagger"}),name:"enableSwagger",extra:n.getFieldValue("enableSwagger")?(0,e.jsx)("a",{href:"/swagger",target:"_blank",rel:"noreferrer",children:t.formatMessage({id:"pages.setting.swaggerLink"})}):"",children:(0,e.jsx)(Z.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.accountChooseRule"}),name:"accountChooseRule",children:(0,e.jsxs)(i.Z,{allowClear:!0,children:[(0,e.jsx)(i.Z.Option,{value:"BestWaitIdle",children:"BestWaitIdle"}),(0,e.jsx)(i.Z.Option,{value:"Random",children:"Random"}),(0,e.jsx)(i.Z.Option,{value:"Weight",children:"Weight"}),(0,e.jsx)(i.Z.Option,{value:"Polling",children:"Polling"})]})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.discordConfig"}),name:"ngDiscord",children:(0,e.jsx)(o,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.proxyConfig"}),name:"proxy",children:(0,e.jsx)(o,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.translate"}),name:"translateWay",children:(0,e.jsxs)(i.Z,{allowClear:!0,children:[(0,e.jsx)(i.Z.Option,{value:"NULL",children:"NULL"}),(0,e.jsx)(i.Z.Option,{value:"BAIDU",children:"BAIDU"})]})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.baiduTranslate"}),name:"baiduTranslate",children:(0,e.jsx)(o,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.smtp"}),name:"smtp",children:(0,e.jsx)(o,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyHook"}),name:"notifyHook",children:(0,e.jsx)(y.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyPoolSize"}),name:"notifyPoolSize",children:(0,e.jsx)(S.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaServer"}),name:"captchaServer",children:(0,e.jsx)(y.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaNotifyHook"}),name:"captchaNotifyHook",children:(0,e.jsx)(y.Z,{})})]})}),(0,e.jsx)(b.Z,{span:12,children:(0,e.jsxs)(L.Z,{title:t.formatMessage({id:"pages.setting.otherSetting"}),bordered:!1,children:[(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.enableRegister"}),name:"enableRegister",children:(0,e.jsx)(Z.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.registerUserDefaultDayLimit"}),name:"registerUserDefaultDayLimit",children:(0,e.jsx)(S.Z,{min:-1})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.enableGuest"}),name:"enableGuest",children:(0,e.jsx)(Z.Z,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.guestDefaultDayLimit"}),name:"guestDefaultDayLimit",children:(0,e.jsx)(S.Z,{min:-1})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.ipRateLimiting"}),name:"ipRateLimiting",children:(0,e.jsx)(o,{})}),(0,e.jsx)(a.Z.Item,{label:t.formatMessage({id:"pages.setting.ipBlackRateLimiting"}),name:"ipBlackRateLimiting",children:(0,e.jsx)(o,{})})]})})]})]})})})},U=H}}]);
