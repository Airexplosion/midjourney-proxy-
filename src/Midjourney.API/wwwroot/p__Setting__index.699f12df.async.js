"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[971],{23391:function(G,b,a){a.r(b),a.d(b,{default:function(){return H}});var O=a(5574),c=a.n(O),g=a(67294),P=a(74981),K=a(90252),Q=a(22777),e=a(85893),R=function(h){var x=h.value,i=x===void 0?{}:x,t=h.onChange,M=g.useState(JSON.stringify(i,null,2)),m=c()(M,2),u=m[0],o=m[1],j=g.useState(!0),p=c()(j,2),I=p[0],r=p[1];(0,g.useEffect)(function(){var L=JSON.stringify(i),Z=JSON.stringify(JSON.parse(u));L!==Z&&o(JSON.stringify(i,null,2))},[i]);var v=function(Z){o(Z);try{var W=JSON.parse(Z);r(!0),t&&t(W)}catch(X){r(!1)}};return(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)(P.ZP,{mode:"json",theme:"textmate",value:u,onChange:v,name:"json-editor",editorProps:{$blockScrolling:!0},height:"auto",maxLines:1/0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1},style:{width:"100%",minHeight:"80px"},fontSize:14,lineHeight:19,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0}),!I&&(0,e.jsx)("div",{style:{color:"red",marginTop:"8px"},children:"JSON \u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\uFF01"})]})},l=R,C=a(66927),J=a(60219),N=a(90930),B=a(80854),s=a(53025),y=a(2453),T=a(74330),A=a(42075),E=a(38437),V=a(14726),$=a(71230),D=a(15746),F=a(4393),f=a(72269),d=a(55102),n=a(85886),S=a(37804),z=function(){var h=s.Z.useForm(),x=c()(h,1),i=x[0],t=(0,B.useIntl)(),M=(0,g.useState)(!1),m=c()(M,2),u=m[0],o=m[1],j=function(){o(!0),(0,C.iE)().then(function(r){o(!1),r.success&&i.setFieldsValue(r.data)})};(0,g.useEffect)(function(){j()},[]);var p=function(){i.validateFields().then(function(r){o(!0),(0,C.rF)(r).then(function(v){o(!1),v.success?(y.ZP.success(t.formatMessage({id:"pages.setting.saveSuccess"})),j()):y.ZP.error(v.message||t.formatMessage({id:"pages.setting.error"}))})}).catch(function(){y.ZP.error(t.formatMessage({id:"pages.setting.error"}))})};return(0,e.jsx)(N._z,{children:(0,e.jsx)(s.Z,{form:i,labelAlign:"left",layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},children:(0,e.jsxs)(T.Z,{spinning:u,children:[(0,e.jsxs)(A.Z,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(E.Z,{type:"info",style:{paddingTop:"4px",paddingBottom:"4px"},description:t.formatMessage({id:"pages.setting.tips"})}),(0,e.jsx)(V.ZP,{loading:u,icon:(0,e.jsx)(J.Z,{}),type:"primary",onClick:p,children:t.formatMessage({id:"pages.setting.save"})})]}),(0,e.jsxs)($.Z,{gutter:16,children:[(0,e.jsx)(D.Z,{span:12,children:(0,e.jsxs)(F.Z,{title:t.formatMessage({id:"pages.setting.accountSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableSwagger"}),name:"enableSwagger",extra:i.getFieldValue("enableSwagger")?(0,e.jsx)("a",{href:"/swagger",target:"_blank",rel:"noreferrer",children:t.formatMessage({id:"pages.setting.swaggerLink"})}):"",children:(0,e.jsx)(f.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.mongoDefaultConnectionString"}),name:"mongoDefaultConnectionString",children:(0,e.jsx)(d.Z,{placeholder:"mongodb://mongoadmin:***admin@192.168.x.x"})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.mongoDefaultDatabase"}),name:"mongoDefaultDatabase",children:(0,e.jsx)(d.Z,{placeholder:"mj"})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.accountChooseRule"}),name:"accountChooseRule",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"BestWaitIdle",children:"BestWaitIdle"}),(0,e.jsx)(n.Z.Option,{value:"Random",children:"Random"}),(0,e.jsx)(n.Z.Option,{value:"Weight",children:"Weight"}),(0,e.jsx)(n.Z.Option,{value:"Polling",children:"Polling"})]})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.discordConfig"}),name:"ngDiscord",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.proxyConfig"}),name:"proxy",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.translate"}),name:"translateWay",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"NULL",children:"NULL"}),(0,e.jsx)(n.Z.Option,{value:"BAIDU",children:"BAIDU"}),(0,e.jsx)(n.Z.Option,{value:"GPT",children:"GPT"})]})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.baiduTranslate"}),name:"baiduTranslate",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.openai"}),name:"openai",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.smtp"}),name:"smtp",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyHook"}),name:"notifyHook",children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyPoolSize"}),name:"notifyPoolSize",children:(0,e.jsx)(S.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaServer"}),name:"captchaServer",children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaNotifyHook"}),name:"captchaNotifyHook",children:(0,e.jsx)(d.Z,{})})]})}),(0,e.jsx)(D.Z,{span:12,children:(0,e.jsxs)(F.Z,{title:t.formatMessage({id:"pages.setting.otherSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.isVerticalDomain"}),name:"isVerticalDomain",help:t.formatMessage({id:"pages.setting.isVerticalDomainTips"}),children:(0,e.jsx)(f.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableRegister"}),name:"enableRegister",children:(0,e.jsx)(f.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.registerUserDefaultDayLimit"}),name:"registerUserDefaultDayLimit",children:(0,e.jsx)(S.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableGuest"}),name:"enableGuest",children:(0,e.jsx)(f.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.guestDefaultDayLimit"}),name:"guestDefaultDayLimit",children:(0,e.jsx)(S.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.ipRateLimiting"}),name:"ipRateLimiting",children:(0,e.jsx)(l,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.ipBlackRateLimiting"}),name:"ipBlackRateLimiting",children:(0,e.jsx)(l,{})})]})})]})]})})})},H=z}}]);
