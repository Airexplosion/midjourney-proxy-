"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[971],{23391:function(le,A,a){a.r(A),a.d(A,{default:function(){return ae}});var G=a(15009),B=a.n(G),U=a(99289),z=a.n(U),W=a(5574),c=a.n(W),m=a(67294),K=a(74981),oe=a(90252),ge=a(22777),e=a(85893),Q=function(S){var C=S.value,l=C===void 0?{}:C,t=S.onChange,L=m.useState(JSON.stringify(l,null,2)),j=c()(L,2),f=j[0],o=j[1],I=m.useState(!0),b=c()(I,2),O=b[0],v=b[1];(0,m.useEffect)(function(){var D=JSON.stringify(l),h=JSON.stringify(JSON.parse(f));D!==h&&o(JSON.stringify(l,null,2))},[l]);var Z=function(h){o(h);try{var F=JSON.parse(h);v(!0),t&&t(F)}catch(R){v(!1)}};return(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)(K.ZP,{mode:"json",theme:"textmate",value:f,onChange:Z,name:"json-editor",editorProps:{$blockScrolling:!0},height:"auto",maxLines:1/0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1},style:{width:"100%",minHeight:"80px"},fontSize:14,lineHeight:19,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0}),!O&&(0,e.jsx)("div",{style:{color:"red",marginTop:"8px"},children:"JSON \u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\uFF01"})]})},g=Q,P=a(66927),X=a(60219),Y=a(90930),k=a(80854),s=a(53025),d=a(2453),w=a(74330),J=a(42075),q=a(38437),_=a(83062),u=a(55102),N=a(14726),ee=a(71230),$=a(15746),E=a(4393),x=a(72269),y=a(37804),r=a(85886),te=function(){var S=s.Z.useForm(),C=c()(S,1),l=C[0],t=(0,k.useIntl)(),L=(0,m.useState)(!1),j=c()(L,2),f=j[0],o=j[1],I=function(){o(!0),(0,P.iE)().then(function(i){o(!1),i.success&&l.setFieldsValue(i.data)})};(0,m.useEffect)(function(){I()},[]);var b=function(){l.validateFields().then(function(i){o(!0),(0,P.rF)(i).then(function(M){o(!1),M.success?(d.ZP.success(t.formatMessage({id:"pages.setting.saveSuccess"})),I()):d.ZP.error(M.message||t.formatMessage({id:"pages.setting.error"}))})}).catch(function(){d.ZP.error(t.formatMessage({id:"pages.setting.error"}))})},O=(0,m.useState)(""),v=c()(O,2),Z=v[0],D=v[1],h=(0,m.useState)(""),F=c()(h,2),R=F[0],ne=F[1],ie=function(){var p=z()(B()().mark(function i(M,H){var V,T;return B()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),V={Host:M,ApiSecret:H},n.next=5,(0,P.gU)(V);case 5:T=n.sent,T.success?d.ZP.success(t.formatMessage({id:"pages.setting.migrateSuccess"})):d.ZP.error(T.message),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),d.ZP.error(n.t0);case 12:return n.prev=12,o(!1),n.finish(12);case 15:case"end":return n.stop()}},i,null,[[0,9,12,15]])}));return function(M,H){return p.apply(this,arguments)}}(),re=function(){Z?ie(Z,R):d.ZP.warning(t.formatMessage({id:"pages.setting.migrateTips"}))};return(0,e.jsx)(Y._z,{children:(0,e.jsx)(s.Z,{form:l,labelAlign:"left",layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},children:(0,e.jsxs)(w.Z,{spinning:f,children:[(0,e.jsxs)(J.Z,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(q.Z,{type:"info",style:{paddingTop:"4px",paddingBottom:"4px"},description:t.formatMessage({id:"pages.setting.tips"})}),(0,e.jsxs)(J.Z,{children:[(0,e.jsx)(_.Z,{placement:"bottom",title:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:8},children:[(0,e.jsx)(u.Z,{style:{marginBottom:8},placeholder:"mjplus host",value:Z,onChange:function(i){return D(i.target.value)}}),(0,e.jsx)(u.Z,{placeholder:"mj-api-secret",value:R,onChange:function(i){return ne(i.target.value)}})]}),children:(0,e.jsx)(N.ZP,{loading:f,type:"primary",ghost:!0,onClick:re,children:t.formatMessage({id:"pages.setting.migrate"})})}),(0,e.jsx)(N.ZP,{loading:f,icon:(0,e.jsx)(X.Z,{}),type:"primary",onClick:b,children:t.formatMessage({id:"pages.setting.save"})})]})]}),(0,e.jsxs)(ee.Z,{gutter:16,children:[(0,e.jsx)($.Z,{span:12,children:(0,e.jsxs)(E.Z,{title:t.formatMessage({id:"pages.setting.accountSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableSwagger"}),name:"enableSwagger",extra:l.getFieldValue("enableSwagger")?(0,e.jsx)("a",{href:"/swagger",target:"_blank",rel:"noreferrer",children:t.formatMessage({id:"pages.setting.swaggerLink"})}):"",children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.mongoDefaultConnectionString"}),name:"mongoDefaultConnectionString",children:(0,e.jsx)(u.Z,{placeholder:"mongodb://mongoadmin:***admin@192.168.x.x"})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.mongoDefaultDatabase"}),name:"mongoDefaultDatabase",children:(0,e.jsx)(u.Z,{placeholder:"mj"})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.isMongoAutoMigrate"}),name:"isMongoAutoMigrate",tooltip:t.formatMessage({id:"pages.setting.isMongoAutoMigrateTips"}),children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.maxCount"}),name:"maxCount",children:(0,e.jsx)(y.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.accountChooseRule"}),name:"accountChooseRule",children:(0,e.jsxs)(r.Z,{allowClear:!0,children:[(0,e.jsx)(r.Z.Option,{value:"BestWaitIdle",children:"BestWaitIdle"}),(0,e.jsx)(r.Z.Option,{value:"Random",children:"Random"}),(0,e.jsx)(r.Z.Option,{value:"Weight",children:"Weight"}),(0,e.jsx)(r.Z.Option,{value:"Polling",children:"Polling"})]})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.discordConfig"}),name:"ngDiscord",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.proxyConfig"}),name:"proxy",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.aliyunOss"}),name:"aliyunOss",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.translate"}),name:"translateWay",children:(0,e.jsxs)(r.Z,{allowClear:!0,children:[(0,e.jsx)(r.Z.Option,{value:"NULL",children:"NULL"}),(0,e.jsx)(r.Z.Option,{value:"BAIDU",children:"BAIDU"}),(0,e.jsx)(r.Z.Option,{value:"GPT",children:"GPT"})]})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.baiduTranslate"}),name:"baiduTranslate",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.openai"}),name:"openai",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.smtp"}),name:"smtp",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyHook"}),name:"notifyHook",children:(0,e.jsx)(u.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.notifyPoolSize"}),name:"notifyPoolSize",children:(0,e.jsx)(y.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaServer"}),name:"captchaServer",children:(0,e.jsx)(u.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.captchaNotifyHook"}),name:"captchaNotifyHook",children:(0,e.jsx)(u.Z,{})})]})}),(0,e.jsx)($.Z,{span:12,children:(0,e.jsxs)(E.Z,{title:t.formatMessage({id:"pages.setting.otherSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.isVerticalDomain"}),name:"isVerticalDomain",help:t.formatMessage({id:"pages.setting.isVerticalDomainTips"}),children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableRegister"}),name:"enableRegister",children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.registerUserDefaultDayLimit"}),name:"registerUserDefaultDayLimit",children:(0,e.jsx)(y.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.enableGuest"}),name:"enableGuest",children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.guestDefaultDayLimit"}),name:"guestDefaultDayLimit",children:(0,e.jsx)(y.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.ipRateLimiting"}),name:"ipRateLimiting",children:(0,e.jsx)(g,{})}),(0,e.jsx)(s.Z.Item,{label:t.formatMessage({id:"pages.setting.ipBlackRateLimiting"}),name:"ipBlackRateLimiting",children:(0,e.jsx)(g,{})})]})})]})]})})})},ae=te}}]);
