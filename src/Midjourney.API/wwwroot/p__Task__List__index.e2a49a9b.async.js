"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[502],{86699:function(me,A,i){i.r(A),i.d(A,{default:function(){return ee}});var P=i(97857),R=i.n(P),D=i(15009),h=i.n(D),B=i(99289),y=i.n(B),G=i(5574),I=i.n(G),V=i(28248),e=i(85893),H=function(f){var a=f.title,t=f.modalVisible,M=f.hideModal,Z=f.modalContent,S=f.footer,m=f.modalWidth;return(0,e.jsx)(V.Z,{title:a,open:t,onCancel:M,footer:S,width:m,children:Z})},W=H,v=i(66309),N=i(38703),w=i(83062),z=i(11499),$=i(74330),E=i(4393),r=i(26412),O=i(80854),J=function(f){var a=f.record,t=(0,O.useIntl)(),M=sessionStorage.getItem("mj-image-prefix")||"",Z=function(s){var g="default";return s=="NOT_START"?g="default":s=="SUBMITTED"?g="lime":s=="MODAL"?g="warning":s=="IN_PROGRESS"?g="processing":s=="FAILURE"?g="error":s=="SUCCESS"?g="success":s=="CANCEL"&&(g="magenta"),(0,e.jsx)(v.Z,{color:g,children:a.displays.status})},S=function(s){var g=0;s&&s.indexOf("%")>0&&(g=parseInt(s.substring(0,s.indexOf("%"))));var j="normal";return a.status=="SUCCESS"?j="success":a.status=="FAILURE"&&(j="exception"),(0,e.jsx)("div",{style:{width:200},children:(0,e.jsx)(N.Z,{percent:g,status:j})})},m=function(s){return!s||s.length<30?s:(0,e.jsx)(w.Z,{title:s,children:s.substring(0,30)+"..."})},C=function(s){return s&&(0,e.jsx)(z.Z,{width:200,src:M+s,placeholder:(0,e.jsx)($.Z,{tip:"Loading",size:"large"})})},k=function(s){return s=="NIJI_JOURNEY"?(0,e.jsx)(v.Z,{color:"green",children:"niji\u30FBjourney"}):s=="INSIGHT_FACE"?(0,e.jsx)(v.Z,{color:"volcano",children:"InsightFace"}):(0,e.jsx)(v.Z,{color:"blue",children:"Midjourney"})},b=function(s){if(!(s==null||!s))return(0,e.jsx)(v.Z,{color:"green",children:t.formatMessage({id:"pages.yes"})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{type:"inner",title:t.formatMessage({id:"pages.account.basicInfo"}),style:{margin:"10px"},children:(0,e.jsxs)(r.Z,{column:2,children:[(0,e.jsx)(r.Z.Item,{label:"ID",children:a.id}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.type"}),children:a.displays.action}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.status"}),children:Z(a.status)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.progress"}),children:S(a.progress)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.prompt"}),children:m(a.prompt)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.promptEn"}),children:m(a.promptEn)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.description"}),children:m(a.description)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.submitTime"}),children:a.displays.submitTime}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.startTime"}),children:a.displays.startTime}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.finishTime"}),children:a.displays.finishTime}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.failReason"}),children:m(a.failReason)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.state"}),children:m(a.state)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.image"}),children:C(a.imageUrl)})]})}),(0,e.jsx)(E.Z,{type:"inner",title:t.formatMessage({id:"pages.task.extendedInfo"}),style:{margin:"10px"},children:(0,e.jsxs)(r.Z,{column:2,children:[(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.botType"}),children:k(a.properties.botType)}),(0,e.jsx)(r.Z.Item,{label:"Nonce",children:a.properties.nonce}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.account.channelId"}),children:a.properties.discordChannelId}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.instanceId"}),children:a.properties.discordInstanceId}),(0,e.jsx)(r.Z.Item,{label:"Hash",children:a.properties.messageHash}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.messageContent"}),children:m(a.properties.messageContent)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.finalPrompt"}),children:m(a.properties.finalPrompt)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.finalPromptZh"}),children:m(a.properties.finalZhPrompt)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.actionId"}),children:m(a.properties.customId)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.modalConfirm"}),children:b(a.properties.needModel)}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.imageSeed"}),children:a.seed}),(0,e.jsx)(r.Z.Item,{label:t.formatMessage({id:"pages.task.notifyHook"}),children:m(a.properties.notifyHook)})]})})]})},K=J,Q=i(66927),Y=i(90930),X=i(98695),q=i(53025),x=i(67294),_=function(){var f=(0,x.useState)(!1),a=I()(f,2),t=a[0],M=a[1],Z=(0,x.useState)({}),S=I()(Z,2),m=S[0],C=S[1],k=(0,x.useState)(""),b=I()(k,2),p=b[0],s=b[1],g=(0,x.useState)({}),j=I()(g,2),ae=j[0],U=j[1],se=(0,x.useState)(1e3),F=I()(se,2),te=F[0],re=F[1],ne=q.Z.useForm(),ie=I()(ne,1),le=ie[0],u=(0,O.useIntl)(),oe=function(){C({}),U({}),M(!1)},de=function(n,l,o,d){le.resetFields(),s(n),C(l),U(o),re(d),M(!0)},ue=[{title:"ID",dataIndex:"id",width:160,align:"center",fixed:"left",render:function(n,l){return(0,e.jsx)("a",{onClick:function(){return de(u.formatMessage({id:"pages.task.info"}),(0,e.jsx)(K,{record:l}),null,1100)},children:n})}},{title:u.formatMessage({id:"pages.task.type"}),dataIndex:"action",width:100,align:"center",request:function(){var c=y()(h()().mark(function l(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",[{label:"Imagine",value:"IMAGINE"},{label:"Upscale",value:"UPSCALE"},{label:"Variation",value:"VARIATION"},{label:"Zoom",value:"ZOOM"},{label:"Pan",value:"PAN"},{label:"Describe",value:"DESCRIBE"},{label:"Blend",value:"BLEND"},{label:"Shorten",value:"SHORTEN"},{label:"SwapFace",value:"SWAP_FACE"}]);case 1:case"end":return d.stop()}},l)}));function n(){return c.apply(this,arguments)}return n}(),render:function(n,l){return l.displays.action}},{title:u.formatMessage({id:"pages.task.instanceId"}),dataIndex:"instanceId",width:180,align:"center",render:function(n,l){return l.properties.discordInstanceId}},{title:u.formatMessage({id:"pages.task.submitTime"}),dataIndex:"submitTime",width:160,hideInSearch:!0,align:"center",render:function(n,l){return l.displays.submitTime}},{title:u.formatMessage({id:"pages.task.status"}),dataIndex:"status",width:90,align:"center",request:function(){var c=y()(h()().mark(function l(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",[{label:u.formatMessage({id:"pages.task.NOT_START"}),value:"NOT_START"},{label:u.formatMessage({id:"pages.task.SUBMITTED"}),value:"SUBMITTED"},{label:u.formatMessage({id:"pages.task.MODAL"}),value:"MODAL"},{label:u.formatMessage({id:"pages.task.IN_PROGRESS"}),value:"IN_PROGRESS"},{label:u.formatMessage({id:"pages.task.FAILURE"}),value:"FAILURE"},{label:u.formatMessage({id:"pages.task.SUCCESS"}),value:"SUCCESS"},{label:u.formatMessage({id:"pages.task.CANCEL"}),value:"CANCEL"}]);case 1:case"end":return d.stop()}},l)}));function n(){return c.apply(this,arguments)}return n}(),render:function(n,l){var o="default";return n=="NOT_START"?o="default":n=="SUBMITTED"?o="lime":n=="MODAL"?o="warning":n=="IN_PROGRESS"?o="processing":n=="FAILURE"?o="error":n=="SUCCESS"?o="success":n=="CANCEL"&&(o="magenta"),(0,e.jsx)(v.Z,{color:o,children:l.displays.status})}},{title:u.formatMessage({id:"pages.task.progress"}),dataIndex:"progress",width:130,showInfo:!1,hideInSearch:!0,render:function(n,l){var o=0;n&&n.indexOf("%")>0&&(o=parseInt(n.substring(0,n.indexOf("%"))));var d="normal";return l.status=="SUCCESS"?d="success":l.status=="FAILURE"&&(d="exception"),(0,e.jsx)(N.Z,{percent:o,status:d,size:"small"})}},{title:u.formatMessage({id:"pages.task.description"}),dataIndex:"description",width:250,ellipsis:!0},{title:u.formatMessage({id:"pages.task.failReason"}),dataIndex:"failReason",width:220,ellipsis:!0}];return(0,e.jsxs)(Y._z,{children:[(0,e.jsx)(E.Z,{children:(0,e.jsx)(X.Z,{columns:ue,scroll:{x:1e3},search:{defaultCollapsed:!0},pagination:{pageSize:10,showQuickJumper:!1,showSizeChanger:!1},rowKey:"id",request:function(){var c=y()(h()().mark(function n(l){var o;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,Q.Pn)(R()(R()({},l),{},{pageNumber:l.current-1}));case 2:return o=T.sent,T.abrupt("return",{data:o.list,total:o.pagination.total,success:!0});case 4:case"end":return T.stop()}},n)}));return function(n){return c.apply(this,arguments)}}()})}),(0,e.jsx)(W,{title:p,modalVisible:t,hideModal:oe,modalContent:m,footer:ae,modalWidth:te})]})},ee=_}}]);
